\ProvidesPackage{../commons/vapaa-matikka_laatikot}

%\newcommand{\pikkulaatikko}[1]{
%    \begin{tabular}{|p{\marginparwidth}|}
%        \hline
%    	\footnotesize #1\\ 
%    	\hline
%    \end{tabular}
%}
%
%\newcommand{\sivulaatikko}[1]{
%    \marginpar{\par\pikkulaatikko{#1}}
%}

% Infoboksi väreineen

\usepackage[framemethod=TikZ]{mdframed}

\definecolor{Sampo3}{cmyk}{0.2,0.27,0.0,0.0}
%\definecolor{ParisGreen}{RGB}{80,200,120}
%\definecolor{PersianGreen}{RGB}{0,166,147}
%\definecolor{darkKhaki}{RGB}{189,183,107}
%\definecolor{cornflowerBlue}{RGB}{154,206,235}
%\definecolor{thulianPink}{RGB}{222,111,161}
%\definecolor{olivine}{RGB}{154,185,115}
%\definecolor{battleshipGray}{RGB}{132,132,130}

%\pgfdeclarehorizontalshading{laatikkotausta}{100bp}{color(0bp)=(ParisGreen); color(50bp)=(ParisGreen); color(100bp)=(ParisGreen!50)}
%\pgfdeclarehorizontalshading{laatikkotausta}{100bp}{color(0bp)=(white); color(50bp)=(Sampo3); color(100bp)=(Sampo3!50)}
\pgfdeclarehorizontalshading{laatikkotausta}{100bp}{color(0bp)=(white); color(25bp)=(white); color(75bp)=(Sampo3); color(100bp)=(Sampo3)}

%\mdfdefinestyle{laatikkotyyli}{
%  userdefinedwidth=0.72\paperwidth, % FIXME: controversial
%  leftmargin=0pt,
%  innermargin=0pt,
%  innerleftmargin=5pt,
%  rightmargin=0pt,
%  innerrightmargin=0pt,
%  middlelinewidth=0pt,
%  apptotikzsetting={\tikzset{mdfbackground/.append style = {shading = laatikkotausta}}},
%  innertopmargin=3mm,
%  innerbottommargin=3mm,
%  needspace=3\baselineskip,
%}

\mdfdefinestyle{laatikkotyyli}{
% Värin pitää mennä vähintään 3 mm paperin reunan yli, jotta
% kirjapainolle jää leikkausvaraa
  usetwoside=false,
  leftmargin=-49mm,
  rightmargin=-25mm,
  innerleftmargin=49mm,
  innerrightmargin=25mm,
  innertopmargin=8pt,
  innerbottommargin=8pt,
  hidealllines=true,
  apptotikzsetting={\tikzset{mdfbackground/.append style = {shading = laatikkotausta}}},
  needspace=3\baselineskip,
}

% laatikot eivät vielä toimi kunnolla. tämä oli hyvä yritys saada laatikko levennettyä :) T: Jokke

% \usepackage{changepage}
% 
% \makeatletter
% \newenvironment{widepar}{%
%   \checkoddpage%
%   \ifthenelse{\boolean{oddpage}}{%
%    \setlength{\leftskip}{-\Gm@lmargin-\Gm@bindingoffset}%
%    \setlength{\rightskip}{-\Gm@rmargin}
%   }{%
%    \setlength{\leftskip}{-\Gm@lmargin}%
%    \setlength{\rightskip}{-\Gm@rmargin-\Gm@bindingoffset}%
%   }%
%   {\par}}
% \makeatother

\newcommand{\laatikko}[2][]{%
%\begin{\widepar}
 \marginpar{\raggedleft\sffamily\fontsize{10}{14}\selectfont{#1}}
% \end{\widepar}
  \begin{mdframed}[style=laatikkotyyli]#2\end{mdframed}
%\end{widepar}
}

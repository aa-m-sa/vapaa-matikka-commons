% Kun käytät tätä, älä lataa pakettia stfloats tai fix2col. Tämä lataa
% myös paketin fixltx2e.
%% "When the new output routine for LaTeX3 is done, this package will
%% be obsolete. The sooner the better..."
\RequirePackage{dblfloatfix}

% Kun käytät tätä, et enää tarvitse paketteja type1cm ja type1ec:
\RequirePackage{fix-cm}

% Luokkamäärittelyt.
\documentclass[a4paper,onecolumn,11pt,finnish,twoside,final,oldtoc]{boek3}
\usepackage[papersize={185mm,240mm},left=36mm,right=12mm,top=10mm,bottom=25mm,%
            asymmetric,bindingoffset=10mm,marginparwidth=30mm]{geometry}
\reversemarginpar % marginaalit toisin päin
\setcounter{secnumdepth}{7} % kaikki numeroidaan ilman *-optiota

% alleviivaus yms
\usepackage[normalem]{ulem}

% cmap: "Make the PDF files generated by pdflatex "searchable and copyable"
% in Adobe (Acrobat) Reader and other compliant PDF viewers."
\usepackage{cmap}

% "Extended conditional commands"
\usepackage{xifthen}

% Erikoismerkit yms.
\usepackage{textcomp}
\usepackage{texnames}

% AMS & matematiikka
\usepackage{mathtools}
\usepackage[psamsfonts]{amssymb}
\usepackage{amsthm}
\usepackage{latexsym}

% XeLaTeX
\usepackage{fourier}
\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text}
\setmainfont[Scale=0.92]{Heuristica}
\usepackage[protrusion=true,verbose=true]{microtype} % XeLaTeX ei toistaiseksi tue 'expansion=true'-optiota

% Otsikoiden säätelyyn
\usepackage{titlesec}

\makeatletter
\g@addto@macro\verbatim{\pdfprotrudechars=0 \pdfadjustspacing=0\relax}
\makeatother

% Babel
\usepackage[finnish,english]{babel}

% if-then-else-rakenteita helposti
\usepackage{ifthen}

% Lisää kokomäärityksiä:
\usepackage[11pt]{moresize}

% Tee jotain jokaisen sivun kohdalla (totpages tarvitsee tätä):
\usepackage{everyshi}

% Laskutehtävien suoritusta (geometry-paketti hyötyy tästä):
\usepackage{calc}

% Riviväli 1,5
\usepackage{setspace}
\onehalfspacing

% URL:ien ladonta ja "tavutus"
\usepackage[obeyspaces,spaces,hyphens,T1]{url}

% TikZ-paketti
\usepackage{pgf,tikz}
\usetikzlibrary{arrows}

% Tunnisteiden ja sivunumeroiden asettamista varten
\usepackage{fancyhdr}

% VerbatimOut Pythonia varten
\usepackage{fancyvrb}
\usepackage{fancybox}

% Euron merkki
\usepackage{eurosym}

% Hymiö
\usepackage{wasysym}

% Harjoitustehtävät answers-paketilla
\usepackage{answers}

% Cancel-paketti supistamista ym. varten
\usepackage{cancel}

% Monipalstainen sisältö esim. lyhyille tehtäville
% Käyttö: \begin{multicols}{n}
%              ...
%         \end{multicols}
\usepackage{multicol}

% Tuki numeroiduille listoille
\usepackage{enumerate}

% Desimaalipilkut
% Käyttö: väli pilkun jälkeen -> listapilkku; ei väliä pilkun jälkeen -> desimaalipilkku
\usepackage{icomma}

% Ei-kursivoidut kreikkalaiset aakkoset, esim. $\upmu$
\usepackage{upgreek}

% Automatisoitu hakemisto
\usepackage{makeidx}
\makeindex

% Aika- ja pvmformaattien kustomointiin
\usepackage{datetime}

% Täältä saa komennon \ifthispageodd
\usepackage{scrextend}

% Marginaalien muuttaminen harjoitustehtäväsivuja varten
\usepackage[strict]{changepage}

% Käännetyt tekstit taulukoita varten
\usepackage{rotating}

\usepackage{array}

% Testailuun, komentoja: \blindtext, \Blindtext, \pagevalues
\usepackage{blindtext}
\usepackage{layouts}

% Ei sisennetä kappaleen ekaa riviä
\setlength{\parindent}{0.0cm}

\theoremstyle{definition}
\newtheorem{theorem}{Teoreema}

% Lisäattribuutteja \includegraphics-komentoon
\usepackage{graphicx}

% allaolevia loogisia muuttujia voi muuttaa meta.tex-tiedostossa
% esim. \varitfalse

% väreissä vai mustavalkoisena
% vaatii vastaavat kuvatiedostot
\newif\ifvarit
\varittrue

% versionumero kansilehteen
\newif\ifversio
\versiotrue

% mikrorahoituskanavat kirjan alkuun
\newif\ifmikro
\mikrotrue

\newcommand{\kurssinTunnus}{}
\newcommand{\kurssinNimi}{}
\newcommand{\sitaatti}{Sitaatti puuttuu.}
\newcommand{\sitaatinLahde}{}
\newcommand{\kirjanVersio}{}
\newcommand{\kirjanPainopaikka}{}
\newcommand{\kirjanVastaavuus}{}
\newcommand{\metasivu}{}

% Hypersetup (metatason pdf-säätöä)
\input{hypersetup}

% Omat komennot
\input{../commons/finnish/constants}
\input{meta}

\ifvarit
    \newcommand{\vari}{}
    \definecolor{vapaa_matikka_vari_3}{cmyk}{0.2,0.27,0.0,0.0} % Laatikot
    \definecolor{vapaa_matikka_vari_4}{cmyk}{1.0,0.42,0.65,0.0} % Esimerkit
    \definecolor{vapaa_matikka_vari_5}{cmyk}{0.60,0.80,0.0,0.0} % Tehtävänumerot
\else
    \newcommand{\vari}{_bw}
    \definecolor{vapaa_matikka_vari_3}{cmyk}{0.0,0.0,0.0,0.25} % Laatikot
    \definecolor{vapaa_matikka_vari_4}{cmyk}{0.0,0.0,0.0,0.6} % Esimerkit
    \definecolor{vapaa_matikka_vari_5}{cmyk}{0.0,0.0,0.0,0.8} % Tehtävänumerot
\fi

% Tarvitaan kuvien ja taulukkojen vierekkäin laittamiseen.
\def\vcent#1{\mathsurround0pt$\vcenter{\hbox{#1}}$}

\input{../commons/packages/index}

\let\cleardoublepage\clearpage

\begin{document}

\urlstyle{same}

\newdateformat{finshortdate}{\THEDAY.\THEMONTH.\THEYEAR}
\selectlanguage{finnish}
\finshortdate

\ifversio
    \kansilehti{Versio \kirjanVersio \, (\today)}
\else
    \kansilehti{}
\fi

\newpage
\input{../commons/finnish/license}
\include{people}

\ifmikro
    \input{../commons/finnish/donations}
\fi

\newpage
\input{../commons/finnish/project}
\tableofcontents
\addtocontents{toc}{\vspace*{-50pt}} % move start of toc higher on page
\input{inside} % incl. Opensolutionfile, Closesolutionfile, appendices

\newpage
\addcontentsline{toc}{chapter}{Hakemisto}
\printindex

\end{document}
